!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=25)}([function(e,t){e.exports=require("events")},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("path")},function(e,t,r){"use strict";e.exports={host:"localhost",user:"win32"===process.platform?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:"",ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var n=r(4),s=n.getTypeParser(20,"text"),i=n.getTypeParser(1016,"text");e.exports.__defineSetter__("parseInt8",(function(e){n.setTypeParser(20,"text",e?n.getTypeParser(23,"text"):s),n.setTypeParser(1016,"text",e?n.getTypeParser(1007,"text"):i)}))},function(e,t,r){var n=r(27),s=r(29),i=r(12),o=r(30);t.getTypeParser=function(e,t){if(!a[t=t||"text"])return u;return a[t][e]||u},t.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text");a[t][e]=r},t.arrayParser=i,t.builtins=o;var a={text:{},binary:{}};function u(e){return String(e)}n.init((function(e,t){a.text[e]=t})),s.init((function(e,t){a.binary[e]=t}))},function(e,t){e.exports=require("stream")},function(e,t,r){"use strict";const n=r(10),s=r(3);var i=function(e,t){if(null==e)return null;if(e instanceof Buffer)return e;if(ArrayBuffer.isView(e)){var r=Buffer.from(e.buffer,e.byteOffset,e.byteLength);return r.length===e.byteLength?r:r.slice(e.byteOffset,e.byteOffset+e.byteLength)}return e instanceof Date?s.parseInputDatesAsUTC?function(e){var t=e.getUTCFullYear(),r=t<1;r&&(t=Math.abs(t)+1);var n=o(t,4)+"-"+o(e.getUTCMonth()+1,2)+"-"+o(e.getUTCDate(),2)+"T"+o(e.getUTCHours(),2)+":"+o(e.getUTCMinutes(),2)+":"+o(e.getUTCSeconds(),2)+"."+o(e.getUTCMilliseconds(),3);n+="+00:00",r&&(n+=" BC");return n}(e):function(e){var t=-e.getTimezoneOffset(),r=e.getFullYear(),n=r<1;n&&(r=Math.abs(r)+1);var s=o(r,4)+"-"+o(e.getMonth()+1,2)+"-"+o(e.getDate(),2)+"T"+o(e.getHours(),2)+":"+o(e.getMinutes(),2)+":"+o(e.getSeconds(),2)+"."+o(e.getMilliseconds(),3);t<0?(s+="-",t*=-1):s+="+";s+=o(Math.floor(t/60),2)+":"+o(t%60,2),n&&(s+=" BC");return s}(e):Array.isArray(e)?function e(t){for(var r="{",n=0;n<t.length;n++)n>0&&(r+=","),null===t[n]||void 0===t[n]?r+="NULL":Array.isArray(t[n])?r+=e(t[n]):t[n]instanceof Buffer?r+="\\\\x"+t[n].toString("hex"):r+='"'+i(t[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return r+="}"}(e):"object"==typeof e?function(e,t){if(e&&"function"==typeof e.toPostgres){if(-1!==(t=t||[]).indexOf(e))throw new Error('circular reference detected while preparing "'+e+'" for query');return t.push(e),i(e.toPostgres(i),t)}return JSON.stringify(e)}(e,t):e.toString()};function o(e,t){for(e=""+e;e.length<t;)e="0"+e;return e}const a=function(e){return n.createHash("md5").update(e,"utf-8").digest("hex")};e.exports={prepareValue:function(e){return i(e)},normalizeQueryConfig:function(e,t,r){return e="string"==typeof e?{text:e}:e,t&&("function"==typeof t?e.callback=t:e.values=t),r&&(e.callback=r),e},postgresMd5PasswordHash:function(e,t,r){var n=a(t+e);return"md5"+a(Buffer.concat([Buffer.from(n),r]))},md5:a}},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("assert")},function(e,t,r){"use strict";var n=r(26),s=r(3),i=r(19),o=r(47);const{DatabaseError:a}=r(20),u=e=>class extends o{constructor(t){super(t,e)}};var c=function(e){this.defaults=s,this.Client=e,this.Query=this.Client.Query,this.Pool=u(this.Client),this._pools=[],this.Connection=i,this.types=r(4),this.DatabaseError=a};void 0!==process.env.NODE_PG_FORCE_NATIVE?e.exports=new c(r(22)):(e.exports=new c(n),Object.defineProperty(e.exports,"native",{configurable:!0,enumerable:!1,get(){var t=null;try{t=new c(r(22))}catch(e){if("MODULE_NOT_FOUND"!==e.code)throw e}return Object.defineProperty(e.exports,"native",{value:t}),t}}))},function(e,t){e.exports=require("crypto")},function(e,t,r){"use strict";t.parse=function(e,t){return new n(e,t).parse()};class n{constructor(e,t){this.source=e,this.transform=t||s,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}}record(e){this.recorded.push(e)}newEntry(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if("["===this.source[0])for(;!this.isEof();){if("="===this.nextCharacter().value)break}}parse(e){var t,r,s;for(this.consumeDimensions();!this.isEof();)if("{"!==(t=this.nextCharacter()).value||s){if("}"!==t.value||s)'"'!==t.value||t.escaped?","!==t.value||s?this.record(t.value):this.newEntry():(s&&this.newEntry(!0),s=!s);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new n(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}}function s(e){return e}},function(e,t,r){var n=r(11);e.exports={create:function(e,t){return{parse:function(){return n.parse(e,t)}}}}},function(e,t,r){"use strict";var n=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,s=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,i=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,o=/^-?infinity$/;function a(e){return-(e-1)}function u(e){return e>=0&&e<100}e.exports=function(e){if(o.test(e))return Number(e.replace("i","I"));var t=n.exec(e);if(!t)return function(e){var t=s.exec(e);if(!t)return;var r=parseInt(t[1],10);t[4]&&(r=a(r));var n=parseInt(t[2],10)-1,i=t[3],o=new Date(r,n,i);u(r)&&o.setFullYear(r);return o}(e)||null;var r=!!t[8],c=parseInt(t[1],10);r&&(c=a(c));var h,l=parseInt(t[2],10)-1,p=t[3],f=parseInt(t[4],10),d=parseInt(t[5],10),m=parseInt(t[6],10),y=t[7];y=y?1e3*parseFloat(y):0;var g=function(e){if(e.endsWith("+00"))return 0;var t=i.exec(e.split(" ")[1]);if(!t)return;var r=t[1];if("Z"===r)return 0;var n="-"===r?-1:1;return(3600*parseInt(t[2],10)+60*parseInt(t[3]||0,10)+parseInt(t[4]||0,10))*n*1e3}(e);return null!=g?(h=new Date(Date.UTC(c,l,p,f,d,m,y)),u(c)&&h.setUTCFullYear(c),0!==g&&h.setTime(h.getTime()-g)):(h=new Date(c,l,p,f,d,m,y),u(c)&&h.setFullYear(c)),h}},function(e,t,r){"use strict";var n=r(28);function s(e){if(!(this instanceof s))return new s(e);n(this,function(e){if(!e)return{};var t=c.exec(e),r="-"===t[8];return Object.keys(h).reduce((function(e,n){var s,i,o=t[h[n]];return o&&(o="milliseconds"===n?(i=(s=o)+"000000".slice(s.length),parseInt(i,10)/1e3):parseInt(o,10))?(r&&~l.indexOf(n)&&(o*=-1),e[n]=o,e):e}),{})}(e))}e.exports=s;var i=["seconds","minutes","hours","days","months","years"];s.prototype.toPostgres=function(){var e=i.filter(this.hasOwnProperty,this);return this.milliseconds&&e.indexOf("seconds")<0&&e.push("seconds"),0===e.length?"0":e.map((function(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,"")),t+" "+e}),this).join(" ")};var o={years:"Y",months:"M",days:"D",hours:"H",minutes:"M",seconds:"S"},a=["years","months","days"],u=["hours","minutes","seconds"];s.prototype.toISOString=s.prototype.toISO=function(){return"P"+a.map(e,this).join("")+"T"+u.map(e,this).join("");function e(e){var t=this[e]||0;return"seconds"===e&&this.milliseconds&&(t=(t+this.milliseconds/1e3).toFixed(6).replace(/0+$/,"")),t+o[e]}};var c=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?","([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?"].map((function(e){return"("+e+")?"})).join("\\s*")),h={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},l=["hours","minutes","seconds","milliseconds"]},function(e,t,r){"use strict";e.exports=function(e){if(/^\\x/.test(e))return new Buffer(e.substr(2),"hex");for(var t="",r=0;r<e.length;)if("\\"!==e[r])t+=e[r],++r;else if(/[0-7]{3}/.test(e.substr(r+1,3)))t+=String.fromCharCode(parseInt(e.substr(r+1,3),8)),r+=4;else{for(var n=1;r+n<e.length&&"\\"===e[r+n];)n++;for(var s=0;s<Math.floor(n/2);++s)t+="\\";r+=2*Math.floor(n/2)}return new Buffer(t,"binary")}},function(e,t,r){"use strict";var n=1e6;e.exports=function(e){var t=e.readInt32BE(0),r=e.readUInt32BE(4),s="";t<0&&(t=~t+(0===r),r=1+~r>>>0,s="-");var i,o,a,u,c,h,l="";if(i=t%n,t=t/n>>>0,a=""+((o=4294967296*i+r)-n*(r=o/n>>>0)),0===r&&0===t)return s+a+l;for(u="",c=6-a.length,h=0;h<c;h++)u+="0";if(l=u+a+l,i=t%n,t=t/n>>>0,a=""+((o=4294967296*i+r)-n*(r=o/n>>>0)),0===r&&0===t)return s+a+l;for(u="",c=6-a.length,h=0;h<c;h++)u+="0";if(l=u+a+l,i=t%n,t=t/n>>>0,a=""+((o=4294967296*i+r)-n*(r=o/n>>>0)),0===r&&0===t)return s+a+l;for(u="",c=6-a.length,h=0;h<c;h++)u+="0";return l=u+a+l,s+(a=""+(o=4294967296*(i=t%n)+r)%n)+l}},function(e,t,r){"use strict";var n=r(4);function s(e){this._types=e||n,this.text={},this.binary={}}s.prototype.getOverrides=function(e){switch(e){case"text":return this.text;case"binary":return this.binary;default:return{}}},s.prototype.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text"),this.getOverrides(t)[e]=r},s.prototype.getTypeParser=function(e,t){return t=t||"text",this.getOverrides(t)[e]||this._types.getTypeParser(e,t)},e.exports=s},function(e,t,r){"use strict";var n=r(36),s=r(3),i=r(37).parse,o=function(e,t,r){return void 0===r?r=process.env["PG"+e.toUpperCase()]:!1===r||(r=process.env[r]),t[e]||r||s[e]},a=function(e){return"'"+(""+e).replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'"},u=function(e,t,r){var n=t[r];null!=n&&e.push(r+"="+a(n))};e.exports=class{constructor(e){(e="string"==typeof e?i(e):e||{}).connectionString&&(e=Object.assign({},e,i(e.connectionString))),this.user=o("user",e),this.database=o("database",e),void 0===this.database&&(this.database=this.user),this.port=parseInt(o("port",e),10),this.host=o("host",e),Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:o("password",e)}),this.binary=o("binary",e),this.options=o("options",e),this.ssl=void 0===e.ssl?function(){switch(process.env.PGSSLMODE){case"disable":return!1;case"prefer":case"require":case"verify-ca":case"verify-full":return!0;case"no-verify":return{rejectUnauthorized:!1}}return s.ssl}():e.ssl,"string"==typeof this.ssl&&"true"===this.ssl&&(this.ssl=!0),"no-verify"===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this.client_encoding=o("client_encoding",e),this.replication=o("replication",e),this.isDomainSocket=!(this.host||"").indexOf("/"),this.application_name=o("application_name",e,"PGAPPNAME"),this.fallback_application_name=o("fallback_application_name",e,!1),this.statement_timeout=o("statement_timeout",e,!1),this.idle_in_transaction_session_timeout=o("idle_in_transaction_session_timeout",e,!1),this.query_timeout=o("query_timeout",e,!1),void 0===e.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(e.connectionTimeoutMillis/1e3),!1===e.keepAlive?this.keepalives=0:!0===e.keepAlive&&(this.keepalives=1),"number"==typeof e.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(e.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(e){var t=[];u(t,this,"user"),u(t,this,"password"),u(t,this,"port"),u(t,this,"application_name"),u(t,this,"fallback_application_name"),u(t,this,"connect_timeout"),u(t,this,"options");var r="object"==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(u(t,r,"sslmode"),u(t,r,"sslca"),u(t,r,"sslkey"),u(t,r,"sslcert"),u(t,r,"sslrootcert"),this.database&&t.push("dbname="+a(this.database)),this.replication&&t.push("replication="+a(this.replication)),this.host&&t.push("host="+a(this.host)),this.isDomainSocket)return e(null,t.join(" "));this.client_encoding&&t.push("client_encoding="+a(this.client_encoding)),n.lookup(this.host,(function(r,n){return r?e(r,null):(t.push("hostaddr="+a(n)),e(null,t.join(" ")))}))}}},function(e,t,r){"use strict";var n=r(41),s=r(0).EventEmitter;const{parse:i,serialize:o}=r(20),a=o.flush(),u=o.sync(),c=o.end();e.exports=class extends s{constructor(e){super(),e=e||{},this.stream=e.stream||new n.Socket,this._keepAlive=e.keepAlive,this._keepAliveInitialDelayMillis=e.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=e.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on("newListener",(function(e){"message"===e&&(t._emitMessage=!0)}))}connect(e,t){var s=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(e,t),this.stream.once("connect",(function(){s._keepAlive&&s.stream.setKeepAlive(!0,s._keepAliveInitialDelayMillis),s.emit("connect")}));const i=function(e){(!s._ending||"ECONNRESET"!==e.code&&"EPIPE"!==e.code)&&s.emit("error",e)};if(this.stream.on("error",i),this.stream.on("close",(function(){s.emit("end")})),!this.ssl)return this.attachListeners(this.stream);this.stream.once("data",(function(e){switch(e.toString("utf8")){case"S":break;case"N":return s.stream.end(),s.emit("error",new Error("The server does not support SSL connections"));default:return s.stream.end(),s.emit("error",new Error("There was an error establishing an SSL connection"))}var o=r(46);const a={socket:s.stream};!0!==s.ssl&&(Object.assign(a,s.ssl),"key"in s.ssl&&(a.key=s.ssl.key)),0===n.isIP(t)&&(a.servername=t);try{s.stream=o.connect(a)}catch(e){return s.emit("error",e)}s.attachListeners(s.stream),s.stream.on("error",i),s.emit("sslconnect")}))}attachListeners(e){e.on("end",()=>{this.emit("end")}),i(e,e=>{var t="error"===e.name?"errorMessage":e.name;this._emitMessage&&this.emit("message",e),this.emit(t,e)})}requestSsl(){this.stream.write(o.requestSsl())}startup(e){this.stream.write(o.startup(e))}cancel(e,t){this._send(o.cancel(e,t))}password(e){this._send(o.password(e))}sendSASLInitialResponseMessage(e,t){this._send(o.sendSASLInitialResponseMessage(e,t))}sendSCRAMClientFinalMessage(e){this._send(o.sendSCRAMClientFinalMessage(e))}_send(e){return!!this.stream.writable&&this.stream.write(e)}query(e){this._send(o.query(e))}parse(e){this._send(o.parse(e))}bind(e){this._send(o.bind(e))}execute(e){this._send(o.execute(e))}flush(){this.stream.writable&&this.stream.write(a)}sync(){this._ending=!0,this._send(a),this._send(u)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(c,()=>{this.stream.end()});this.stream.end()}close(e){this._send(o.close(e))}describe(e){this._send(o.describe(e))}sendCopyFromChunk(e){this._send(o.copyData(e))}endCopyFrom(){this._send(o.copyDone())}sendCopyFail(e){this._send(o.copyFail(e))}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseError=t.serialize=t.parse=void 0;const n=r(21);Object.defineProperty(t,"DatabaseError",{enumerable:!0,get:function(){return n.DatabaseError}});const s=r(42);Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return s.serialize}});const i=r(44);t.parse=function(e,t){const r=new i.Parser;return e.on("data",e=>r.parse(e,t)),new Promise(t=>e.on("end",()=>t()))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoticeMessage=t.DataRowMessage=t.CommandCompleteMessage=t.ReadyForQueryMessage=t.NotificationResponseMessage=t.BackendKeyDataMessage=t.AuthenticationMD5Password=t.ParameterStatusMessage=t.ParameterDescriptionMessage=t.RowDescriptionMessage=t.Field=t.CopyResponse=t.CopyDataMessage=t.DatabaseError=t.copyDone=t.emptyQuery=t.replicationStart=t.portalSuspended=t.noData=t.closeComplete=t.bindComplete=t.parseComplete=void 0,t.parseComplete={name:"parseComplete",length:5},t.bindComplete={name:"bindComplete",length:5},t.closeComplete={name:"closeComplete",length:5},t.noData={name:"noData",length:5},t.portalSuspended={name:"portalSuspended",length:5},t.replicationStart={name:"replicationStart",length:4},t.emptyQuery={name:"emptyQuery",length:4},t.copyDone={name:"copyDone",length:4};class n extends Error{constructor(e,t,r){super(e),this.length=t,this.name=r}}t.DatabaseError=n;t.CopyDataMessage=class{constructor(e,t){this.length=e,this.chunk=t,this.name="copyData"}};t.CopyResponse=class{constructor(e,t,r,n){this.length=e,this.name=t,this.binary=r,this.columnTypes=new Array(n)}};t.Field=class{constructor(e,t,r,n,s,i,o){this.name=e,this.tableID=t,this.columnID=r,this.dataTypeID=n,this.dataTypeSize=s,this.dataTypeModifier=i,this.format=o}};t.RowDescriptionMessage=class{constructor(e,t){this.length=e,this.fieldCount=t,this.name="rowDescription",this.fields=new Array(this.fieldCount)}};t.ParameterDescriptionMessage=class{constructor(e,t){this.length=e,this.parameterCount=t,this.name="parameterDescription",this.dataTypeIDs=new Array(this.parameterCount)}};t.ParameterStatusMessage=class{constructor(e,t,r){this.length=e,this.parameterName=t,this.parameterValue=r,this.name="parameterStatus"}};t.AuthenticationMD5Password=class{constructor(e,t){this.length=e,this.salt=t,this.name="authenticationMD5Password"}};t.BackendKeyDataMessage=class{constructor(e,t,r){this.length=e,this.processID=t,this.secretKey=r,this.name="backendKeyData"}};t.NotificationResponseMessage=class{constructor(e,t,r,n){this.length=e,this.processId=t,this.channel=r,this.payload=n,this.name="notification"}};t.ReadyForQueryMessage=class{constructor(e,t){this.length=e,this.status=t,this.name="readyForQuery"}};t.CommandCompleteMessage=class{constructor(e,t){this.length=e,this.text=t,this.name="commandComplete"}};t.DataRowMessage=class{constructor(e,t){this.length=e,this.fields=t,this.name="dataRow",this.fieldCount=t.length}};t.NoticeMessage=class{constructor(e,t){this.length=e,this.message=t,this.name="notice"}}},function(e,t,r){"use strict";e.exports=r(48)},function(e,t,r){"use strict";function n(e,t){this.source=e,this.transform=t||s,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}function s(e){return e}t.parse=function(e,t){return new n(e,t).parse()},n.prototype.isEof=function(){return this.position>=this.source.length},n.prototype.nextCharacter=function(){var e=this.source[this.position++];return"\\"===e?{value:this.source[this.position++],escaped:!0}:{value:e,escaped:!1}},n.prototype.record=function(e){this.recorded.push(e)},n.prototype.newEntry=function(e){var t;(this.recorded.length>0||e)&&("NULL"!==(t=this.recorded.join(""))||e||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])},n.prototype.parse=function(e){for(var t,r,s;!this.isEof();)if("{"!==(t=this.nextCharacter()).value||s){if("}"!==t.value||s)'"'!==t.value||t.escaped?","!==t.value||s?this.record(t.value):this.newEntry():(s&&this.newEntry(!0),s=!s);else if(this.dimension--,!this.dimension&&(this.newEntry(),e))return this.entries}else this.dimension++,this.dimension>1&&(r=new n(this.source.substr(this.position-1),this.transform),this.entries.push(r.parse(!0)),this.position+=r.position-2);if(0!==this.dimension)throw new Error("array dimension not balanced");return this.entries}},function(e,t,r){var n=r(23);e.exports={create:function(e,t){return{parse:function(){return n.parse(e,t)}}}}},function(e,t,r){const n=r(9),s=process.env.PSQL_CONN_STRING;let i;t.handler=(e,t,r)=>{i=new n.Client(s),i.connect((function(e){if(e)return r(null,{statusCode:400,body:e.message});i.query("SELECT * FROM activities ORDER BY id ASC",(function(e,t){return i.end(),r(null,e?{statusCode:400,body:e.message}:{statusCode:200,body:JSON.stringify(t.rows)})}))}))}},function(e,t,r){"use strict";var n=r(0).EventEmitter,s=(r(1),r(6)),i=r(31),o=r(32),a=r(17),u=r(18),c=r(39),h=r(3),l=r(19);class p extends n{constructor(e){super(),this.connectionParameters=new u(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||global.Promise,this._types=new a(t.types),this._ending=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.connection=t.connection||new l({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=t.binary||h.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=t.connectionTimeoutMillis||0}_errorAllQueries(e){const t=t=>{process.nextTick(()=>{t.handleError(e,this.connection)})};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,r=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){const t=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{e(t)})}else this._connecting=!0,this.connectionTimeoutHandle,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{r._ending=!0,r.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis)),this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){t.ssl?r.requestSsl():r.startup(t.getStartupConf())})),r.on("sslconnect",(function(){r.startup(t.getStartupConf())})),this._attachListeners(r),r.once("end",()=>{const e=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),process.nextTick(()=>{this.emit("end")})})}connect(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)}_attachListeners(e){e.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),e.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),e.on("authenticationSASL",this._handleAuthSASL.bind(this)),e.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),e.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),e.on("backendKeyData",this._handleBackendKeyData.bind(this)),e.on("error",this._handleErrorEvent.bind(this)),e.on("errorMessage",this._handleErrorMessage.bind(this)),e.on("readyForQuery",this._handleReadyForQuery.bind(this)),e.on("notice",this._handleNotice.bind(this)),e.on("rowDescription",this._handleRowDescription.bind(this)),e.on("dataRow",this._handleDataRow.bind(this)),e.on("portalSuspended",this._handlePortalSuspended.bind(this)),e.on("emptyQuery",this._handleEmptyQuery.bind(this)),e.on("commandComplete",this._handleCommandComplete.bind(this)),e.on("parseComplete",this._handleParseComplete.bind(this)),e.on("copyInResponse",this._handleCopyInResponse.bind(this)),e.on("copyData",this._handleCopyData.bind(this)),e.on("notification",this._handleNotification.bind(this))}_checkPgPass(e){const t=this.connection;"function"==typeof this.password?this._Promise.resolve().then(()=>this.password()).then(r=>{if(void 0!==r){if("string"!=typeof r)return void t.emit("error",new TypeError("Password must be a string"));this.connectionParameters.password=this.password=r}else this.connectionParameters.password=this.password=null;e()}).catch(e=>{t.emit("error",e)}):null!==this.password?e():o(this.connectionParameters,t=>{void 0!==t&&(this.connectionParameters.password=this.password=t),e()})}_handleAuthCleartextPassword(e){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(e){this._checkPgPass(()=>{const t=s.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)})}_handleAuthSASL(e){this._checkPgPass(()=>{this.saslSession=i.startSession(e.mechanisms),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)})}_handleAuthSASLContinue(e){i.continueSession(this.saslSession,this.password,e.data),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}_handleAuthSASLFinal(e){i.finalizeSession(this.saslSession,e.data),this.saslSession=null}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));const{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit("error",e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit("error",e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,this.connection)):this._handleErrorEvent(e)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){this.activeQuery.handleCommandComplete(e,this.connection)}_handleParseComplete(e){this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit("notification",e)}_handleNotice(e){this.emit("notice",e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},r=e.application_name||e.fallback_application_name;return r&&(t.application_name=r),e.replication&&(t.replication=""+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var r=this.connection;this.host&&0===this.host.indexOf("/")?r.connect(this.host+"/.s.PGSQL."+this.port):r.connect(this.port,this.host),r.on("connect",(function(){r.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,r){return this._types.setTypeParser(e,t,r)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return'"'+e.replace(/"/g,'""')+'"'}escapeLiteral(e){for(var t=!1,r="'",n=0;n<e.length;n++){var s=e[n];"'"===s?r+=s+s:"\\"===s?(r+=s+s,t=!0):r+=s}return r+="'",!0===t&&(r=" E"+r),r}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick(()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(e,t,r){var n,s,i,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");return"function"==typeof e.submit?(i=e.query_timeout||this.connectionParameters.query_timeout,s=n=e,"function"==typeof t&&(n.callback=n.callback||t)):(i=this.connectionParameters.query_timeout,(n=new c(e,t,r)).callback||(s=new this._Promise((e,t)=>{n.callback=(r,n)=>r?t(r):e(n)}))),i&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this.queryQueue.indexOf(n);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()},i),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),s):(this.queryQueue.push(n),this._pulseQueryQueue(),s):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),s)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise(e=>{this.connection.once("end",e)});this.connection.once("end",e)}}p.Query=c,e.exports=p},function(e,t,r){var n=r(11),s=r(12),i=r(13),o=r(14),a=r(15);function u(e){return function(t){return null===t?t:e(t)}}function c(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function h(e){return e?n.parse(e,c):null}function l(e){return parseInt(e,10)}function p(e){return e?n.parse(e,u(l)):null}function f(e){return e?n.parse(e,u((function(e){return w(e).trim()}))):null}var d=function(e){return e?s.create(e,(function(e){return null!==e&&(e=E(e)),e})).parse():null},m=function(e){return e?s.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},y=function(e){return e?s.create(e).parse():null},g=function(e){return e?s.create(e,(function(e){return null!==e&&(e=i(e)),e})).parse():null},_=function(e){return e?s.create(e,(function(e){return null!==e&&(e=o(e)),e})).parse():null},v=function(e){return e?n.parse(e,u(a)):null},b=function(e){return parseInt(e,10)},w=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},S=function(e){return e?n.parse(e,u(JSON.parse)):null},E=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},C=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,s=2;s<e.length-1;s++)n||(t+=e[s]),")"!==e[s]?n&&","!==e[s]&&(r+=e[s]):n=!0;var i=E(t);return i.radius=parseFloat(r),i};e.exports={init:function(e){e(20,w),e(21,b),e(23,b),e(26,b),e(700,parseFloat),e(701,parseFloat),e(16,c),e(1082,i),e(1114,i),e(1184,i),e(600,E),e(651,y),e(718,C),e(1e3,h),e(1001,v),e(1005,p),e(1007,p),e(1028,p),e(1016,f),e(1017,d),e(1021,m),e(1022,m),e(1231,m),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,o),e(1187,_),e(17,a),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,S),e(3807,S),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)}}},function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)r.call(n,s)&&(e[s]=n[s])}return e};var r=Object.prototype.hasOwnProperty},function(e,t,r){var n=r(16),s=function(e,t,r,n,s){n=n||!1,s=s||function(e,t,r){return e*Math.pow(2,r)+t};var i=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a>>=r%8);var c=0;r%8+t>=8&&(c=s(0,o(e[i])&a,u));for(var h=t+r>>3,l=i+1;l<h;l++)c=s(c,o(e[l]),8);var p=(t+r)%8;return p>0&&(c=s(c,o(e[h])>>8-p,p)),c},i=function(e,t,r){var n=Math.pow(2,r-1)-1,i=s(e,1),o=s(e,r,1);if(0===o)return 0;var a=1,u=s(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)a/=2,(t&1<<r-n)>0&&(e+=a);return e}));return o==Math.pow(2,r+1)-1?0===u?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,o-n)*u},o=function(e){return 1==s(e,1)?-1*(s(e,15,1,!0)+1):s(e,15,1)},a=function(e){return 1==s(e,1)?-1*(s(e,31,1,!0)+1):s(e,31,1)},u=function(e){return i(e,23,8)},c=function(e){return i(e,52,11)},h=function(e){var t=s(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,s(e,16,16)),n=0,i=s(e,16),o=0;o<i;o++)n+=s(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,s(e,16,48));return(0===t?1:-1)*Math.round(n*a)/a},l=function(e,t){var r=s(t,1),n=s(t,63,1),i=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i},p=function(e){for(var t=s(e,32),r=(s(e,32,32),s(e,32,64)),n=96,i=[],o=0;o<t;o++)i[o]=s(e,32,n),n+=32,n+=32;var a=function(t){var r,i=s(e,32,n);return n+=32,4294967295==i?null:23==t||20==t?(r=s(e,8*i,n),n+=8*i,r):25==t?r=e.toString(this.encoding,n>>3,(n+=i<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},u=function(e,t){var r,n=[];if(e.length>1){var s=e.shift();for(r=0;r<s;r++)n[r]=u(e,t);e.unshift(s)}else for(r=0;r<e[0];r++)n[r]=a(t);return n};return u(i,r)},f=function(e){return e.toString("utf8")},d=function(e){return null===e?null:s(e,8)>0};e.exports={init:function(e){e(20,n),e(21,o),e(23,a),e(26,a),e(1700,h),e(700,u),e(701,c),e(16,d),e(1114,l.bind(null,!1)),e(1184,l.bind(null,!0)),e(1e3,p),e(1007,p),e(1016,p),e(1008,p),e(1009,p),e(25,f)}}},function(e,t){e.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}},function(e,t,r){"use strict";const n=r(10);function s(e){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(e)}function i(e){if("string"!=typeof e)throw new TypeError("SASL: attribute pairs text must be a string");return new Map(e.split(",").map(e=>{if(!/^.=/.test(e))throw new Error("SASL: Invalid attribute pair entry");return[e[0],e.substring(2)]}))}function o(e,t){if(!Buffer.isBuffer(e))throw new TypeError("first argument must be a Buffer");if(!Buffer.isBuffer(t))throw new TypeError("second argument must be a Buffer");if(e.length!==t.length)throw new Error("Buffer lengths must match");if(0===e.length)throw new Error("Buffers cannot be empty");return Buffer.from(e.map((r,n)=>e[n]^t[n]))}function a(e,t){return n.createHmac("sha256",e).update(t).digest()}e.exports={startSession:function(e){if(-1===e.indexOf("SCRAM-SHA-256"))throw new Error("SASL: Only mechanism SCRAM-SHA-256 is currently supported");const t=n.randomBytes(18).toString("base64");return{mechanism:"SCRAM-SHA-256",clientNonce:t,response:"n,,n=*,r="+t,message:"SASLInitialResponse"}},continueSession:function(e,t,r){if("SASLInitialResponse"!==e.message)throw new Error("SASL: Last message was not SASLInitialResponse");if("string"!=typeof t)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string");if("string"!=typeof r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string");const u=function(e){const t=i(e),r=t.get("r");if(!r)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing");if(!function(e){if("string"!=typeof e)throw new TypeError("SASL: text must be a string");return e.split("").map((t,r)=>e.charCodeAt(r)).every(e=>e>=33&&e<=43||e>=45&&e<=126)}(r))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters");const n=t.get("s");if(!n)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing");if(!s(n))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64");const o=t.get("i");if(!o)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing");if(!/^[1-9][0-9]*$/.test(o))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count");const a=parseInt(o,10);return{nonce:r,salt:n,iteration:a}}(r);if(!u.nonce.startsWith(e.clientNonce))throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce");if(u.nonce.length===e.clientNonce.length)throw new Error("SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short");var c,h=function(e,t,r){for(var n=a(e,Buffer.concat([t,Buffer.from([0,0,0,1])])),s=n,i=0;i<r-1;i++)n=a(e,n),s=o(s,n);return s}(t,Buffer.from(u.salt,"base64"),u.iteration),l=a(h,"Client Key"),p=(c=l,n.createHash("sha256").update(c).digest()),f="n=*,r="+e.clientNonce,d="r="+u.nonce+",s="+u.salt+",i="+u.iteration,m="c=biws,r="+u.nonce,y=f+","+d+","+m,g=o(l,a(p,y)).toString("base64"),_=a(h,"Server Key"),v=a(_,y);e.message="SASLResponse",e.serverSignature=v.toString("base64"),e.response=m+",p="+g},finalizeSession:function(e,t){if("SASLResponse"!==e.message)throw new Error("SASL: Last message was not SASLResponse");if("string"!=typeof t)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string");const{serverSignature:r}=function(e){const t=i(e).get("v");if(!t)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing");if(!s(t))throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64");return{serverSignature:t}}(t);if(r!==e.serverSignature)throw new Error("SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match")}}},function(e,t,r){"use strict";r(2);var n=r(7),s=r(33);e.exports=function(e,t){var r=s.getFileName();n.stat(r,(function(i,o){if(i||!s.usePgPass(o,r))return t(void 0);var a=n.createReadStream(r);s.getPassword(e,a,t)}))},e.exports.warnTo=s.warnTo},function(e,t,r){"use strict";var n=r(2),s=r(5).Stream,i=r(34),o=r(1),a="win32"===process.platform,u=process.stderr;var c=["host","port","database","user","password"],h=c.length,l=c[h-1];function p(){var e=u instanceof s&&!0===u.writable;if(e){var t=Array.prototype.slice.call(arguments).concat("\n");u.write(o.format.apply(o,t))}}Object.defineProperty(e.exports,"isWin",{get:function(){return a},set:function(e){a=e}}),e.exports.warnTo=function(e){var t=u;return u=e,t},e.exports.getFileName=function(e){var t=e||process.env;return t.PGPASSFILE||(a?n.join(t.APPDATA||"./","postgresql","pgpass.conf"):n.join(t.HOME||"./",".pgpass"))},e.exports.usePgPass=function(e,t){return!Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")&&(!!a||(t=t||"<unkn>",32768!=(61440&e.mode)?(p('WARNING: password file "%s" is not a plain file',t),!1):!(63&e.mode)||(p('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var f=e.exports.match=function(e,t){return c.slice(0,-1).reduce((function(r,n,s){return 1==s&&Number(e[n]||5432)===Number(t[n])?r&&!0:r&&("*"===t[n]||t[n]===e[n])}),!0)};e.exports.getPassword=function(e,t,r){var n,s=t.pipe(i());var o=function(e){t.destroy(),p("WARNING: error on reading file: %s",e),r(void 0)};t.on("error",o),s.on("data",(function(t){var r=d(t);r&&m(r)&&f(e,r)&&(n=r[l],s.end())})).on("end",(function(){t.destroy(),r(n)})).on("error",o)};var d=e.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",n=0,s=0,i={},o=function(t,r,n){var s=e.substring(r,n);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(s=s.replace(/\\([:\\])/g,"$1")),i[c[t]]=s},a=0;a<e.length-1;a+=1){if(t=e.charAt(a+1),r=e.charAt(a),n==h-1){o(n,s);break}a>=0&&":"==t&&"\\"!==r&&(o(n,s,a+1),s=a+2,n+=1)}return i=Object.keys(i).length===h?i:null},m=e.exports.isValidEntry=function(e){for(var t={0:function(e){return e.length>0},1:function(e){return"*"===e||(e=Number(e),isFinite(e)&&e>0&&e<9007199254740992&&Math.floor(e)===e)},2:function(e){return e.length>0},3:function(e){return e.length>0},4:function(e){return e.length>0}},r=0;r<c.length;r+=1){if(!(0,t[r])(e[c[r]]||""))return!1}return!0}},function(e,t,r){"use strict";const{Transform:n}=r(5),{StringDecoder:s}=r(35),i=Symbol("last"),o=Symbol("decoder");function a(e,t,r){let n;if(this.overflow){if(n=this[o].write(e).split(this.matcher),1===n.length)return r();n.shift(),this.overflow=!1}else this[i]+=this[o].write(e),n=this[i].split(this.matcher);this[i]=n.pop();for(let e=0;e<n.length;e++)try{c(this,this.mapper(n[e]))}catch(e){return r(e)}this.overflow=this[i].length>this.maxLength,!this.overflow||this.skipOverflow?r():r(new Error("maximum buffer reached"))}function u(e){if(this[i]+=this[o].end(),this[i])try{c(this,this.mapper(this[i]))}catch(t){return e(t)}e()}function c(e,t){void 0!==t&&e.push(t)}function h(e){return e}e.exports=function(e,t,r){switch(e=e||/\r?\n/,t=t||h,r=r||{},arguments.length){case 1:"function"==typeof e?(t=e,e=/\r?\n/):"object"!=typeof e||e instanceof RegExp||(r=e,e=/\r?\n/);break;case 2:"function"==typeof e?(r=t,t=e,e=/\r?\n/):"object"==typeof t&&(r=t,t=h)}(r=Object.assign({},r)).autoDestroy=!0,r.transform=a,r.flush=u,r.readableObjectMode=!0;const c=new n(r);return c[i]="",c[o]=new s("utf8"),c.matcher=e,c.mapper=t,c.maxLength=r.maxLength,c.skipOverflow=r.skipOverflow||!1,c.overflow=!1,c._destroy=function(e,t){this._writableState.errorEmitted=!1,t(e)},c}},function(e,t){e.exports=require("string_decoder")},function(e,t){e.exports=require("dns")},function(e,t,r){"use strict";var n=r(38),s=r(7);function i(e){if("/"===e.charAt(0))return{host:(r=e.split(" "))[0],database:r[1]};var t=n.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=t.query;for(var i in r)Array.isArray(r[i])&&(r[i]=r[i][r[i].length-1]);var o=(t.auth||":").split(":");if(r.user=o[0],r.password=o.splice(1).join(":"),r.port=t.port,"socket:"==t.protocol)return r.host=decodeURI(t.pathname),r.database=t.query.db,r.client_encoding=t.query.encoding,r;r.host||(r.host=t.hostname);var a=t.pathname;if(!r.host&&a&&/^%2f/i.test(a)){var u=a.split("/");r.host=decodeURIComponent(u[0]),a=u.splice(1).join("/")}switch(a&&"/"===a.charAt(0)&&(a=a.slice(1)||null),r.database=a&&decodeURI(a),"true"!==r.ssl&&"1"!==r.ssl||(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=s.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=s.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=s.readFileSync(r.sslrootcert).toString()),r.sslmode){case"disable":r.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":r.ssl.rejectUnauthorized=!1}return r}e.exports=i,i.parse=i},function(e,t){e.exports=require("url")},function(e,t,r){"use strict";const{EventEmitter:n}=r(0),s=r(40),i=r(6);e.exports=class extends n{constructor(e,t,r){super(),e=i.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.rows=e.rows,this.types=e.types,this.name=e.name,this.binary=e.binary,this.portal=e.portal||"",this.callback=e.callback,this._rowMode=e.rowMode,process.domain&&e.callback&&(this.callback=process.domain.bind(e.callback)),this._result=new s(this._rowMode,this.types),this._results=this._result,this.isPreparedStatement=!1,this._canceledDueToError=!1,this._promise=null}requiresPreparation(){return!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0))}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new s(this._rowMode,this.types),this._results.push(this._result))}handleRowDescription(e){this._checkForMultirow(),this._result.addFields(e.fields),this._accumulateRows=this.callback||!this.listeners("row").length}handleDataRow(e){let t;if(!this._canceledDueToError){try{t=this._result.parseRow(e.fields)}catch(e){return void(this._canceledDueToError=e)}this.emit("row",t,this._result),this._accumulateRows&&this._result.addRow(t)}}handleCommandComplete(e,t){this._checkForMultirow(),this._result.addCommandComplete(e),this.rows&&t.sync()}handleEmptyQuery(e){this.rows&&e.sync()}handleError(e,t){if(this._canceledDueToError&&(e=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(e);this.emit("error",e)}handleReadyForQuery(e){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,e);this.callback&&this.callback(null,this._results),this.emit("end",this._results)}submit(e){if("string"!=typeof this.text&&"string"!=typeof this.name)return new Error("A query must have either text or a name. Supplying neither is unsupported.");const t=e.parsedStatements[this.name];return this.text&&t&&this.text!==t?new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`):this.values&&!Array.isArray(this.values)?new Error("Query values must be an array"):(this.requiresPreparation()?this.prepare(e):e.query(this.text),null)}hasBeenParsed(e){return this.name&&e.parsedStatements[this.name]}handlePortalSuspended(e){this._getRows(e,this.rows)}_getRows(e,t){e.execute({portal:this.portal,rows:t}),t?e.flush():e.sync()}prepare(e){this.isPreparedStatement=!0,this.hasBeenParsed(e)||e.parse({text:this.text,name:this.name,types:this.types});try{e.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:i.prepareValue})}catch(t){return void this.handleError(t,e)}e.describe({type:"P",name:this.portal||""}),this._getRows(e,this.rows)}handleCopyInResponse(e){e.sendCopyFail("No source stream defined")}handleCopyData(e,t){}}},function(e,t,r){"use strict";var n=r(4),s=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;e.exports=class{constructor(e,t){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=t,this.RowCtor=null,this.rowAsArray="array"===e,this.rowAsArray&&(this.parseRow=this._parseRowAsArray)}addCommandComplete(e){var t;(t=e.text?s.exec(e.text):s.exec(e.command))&&(this.command=t[1],t[3]?(this.oid=parseInt(t[2],10),this.rowCount=parseInt(t[3],10)):t[2]&&(this.rowCount=parseInt(t[2],10)))}_parseRowAsArray(e){for(var t=new Array(e.length),r=0,n=e.length;r<n;r++){var s=e[r];t[r]=null!==s?this._parsers[r](s):null}return t}parseRow(e){for(var t={},r=0,n=e.length;r<n;r++){var s=e[r],i=this.fields[r].name;t[i]=null!==s?this._parsers[r](s):null}return t}addRow(e){this.rows.push(e)}addFields(e){this.fields=e,this.fields.length&&(this._parsers=new Array(e.length));for(var t=0;t<e.length;t++){var r=e[t];this._types?this._parsers[t]=this._types.getTypeParser(r.dataTypeID,r.format||"text"):this._parsers[t]=n.getTypeParser(r.dataTypeID,r.format||"text")}}}},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=void 0;const n=r(43),s=new n.Writer,i=[],o=new n.Writer,a=Buffer.from([69,0,0,0,9,0,0,0,0,0]),u=(e,t)=>{const r=4+Buffer.byteLength(t)+1,n=Buffer.allocUnsafe(1+r);return n[0]=e,n.writeInt32BE(r,1),n.write(t,5,"utf-8"),n[r]=0,n},c=s.addCString("P").flush(68),h=s.addCString("S").flush(68),l=e=>Buffer.from([e,0,0,0,4]),p=l(72),f=l(83),d=l(88),m=l(99),y={startup:e=>{s.addInt16(3).addInt16(0);for(const t of Object.keys(e))s.addCString(t).addCString(e[t]);s.addCString("client_encoding").addCString("UTF8");var t=s.addCString("").flush(),r=t.length+4;return(new n.Writer).addInt32(r).add(t).flush()},password:e=>s.addCString(e).flush(112),requestSsl:()=>{const e=Buffer.allocUnsafe(8);return e.writeInt32BE(8,0),e.writeInt32BE(80877103,4),e},sendSASLInitialResponseMessage:function(e,t){return s.addCString(e).addInt32(Buffer.byteLength(t)).addString(t),s.flush(112)},sendSCRAMClientFinalMessage:function(e){return s.addString(e).flush(112)},query:e=>s.addCString(e).flush(81),parse:e=>{const t=e.name||"";t.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",t,t.length),console.error("This can cause conflicts and silent errors executing queries"));const r=e.types||i;for(var n=r.length,o=s.addCString(t).addCString(e.text).addInt16(n),a=0;a<n;a++)o.addInt32(r[a]);return s.flush(80)},bind:(e={})=>{const t=e.portal||"",r=e.statement||"",n=e.binary||!1,a=e.values||i,u=a.length;return s.addCString(t).addCString(r),s.addInt16(u),function(e,t){for(let r=0;r<e.length;r++){const n=t?t(e[r],r):e[r];null==n?(s.addInt16(0),o.addInt32(-1)):n instanceof Buffer?(s.addInt16(1),o.addInt32(n.length),o.add(n)):(s.addInt16(0),o.addInt32(Buffer.byteLength(n)),o.addString(n))}}(a,e.valueMapper),s.addInt16(u),s.add(o.flush()),s.addInt16(n?1:0),s.flush(66)},execute:e=>{if(!e||!e.portal&&!e.rows)return a;const t=e.portal||"",r=e.rows||0,n=Buffer.byteLength(t),s=4+n+1+4,i=Buffer.allocUnsafe(1+s);return i[0]=69,i.writeInt32BE(s,1),i.write(t,5,"utf-8"),i[n+5]=0,i.writeUInt32BE(r,i.length-4),i},describe:e=>e.name?u(68,`${e.type}${e.name||""}`):"P"===e.type?c:h,close:e=>{const t=`${e.type}${e.name||""}`;return u(67,t)},flush:()=>p,sync:()=>f,end:()=>d,copyData:e=>s.add(e).flush(100),copyDone:()=>m,copyFail:e=>u(102,e),cancel:(e,t)=>{const r=Buffer.allocUnsafe(16);return r.writeInt32BE(16,0),r.writeInt16BE(1234,4),r.writeInt16BE(5678,6),r.writeInt32BE(e,8),r.writeInt32BE(t,12),r}};t.serialize=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Writer=void 0;t.Writer=class{constructor(e=256){this.size=e,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(e)}ensure(e){if(this.buffer.length-this.offset<e){var t=this.buffer,r=t.length+(t.length>>1)+e;this.buffer=Buffer.allocUnsafe(r),t.copy(this.buffer)}}addInt32(e){return this.ensure(4),this.buffer[this.offset++]=e>>>24&255,this.buffer[this.offset++]=e>>>16&255,this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addInt16(e){return this.ensure(2),this.buffer[this.offset++]=e>>>8&255,this.buffer[this.offset++]=e>>>0&255,this}addCString(e){if(e){var t=Buffer.byteLength(e);this.ensure(t+1),this.buffer.write(e,this.offset,"utf-8"),this.offset+=t}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(e=""){var t=Buffer.byteLength(e);return this.ensure(t),this.buffer.write(e,this.offset),this.offset+=t,this}add(e){return this.ensure(e.length),e.copy(this.buffer,this.offset),this.offset+=e.length,this}join(e){if(e){this.buffer[this.headerPosition]=e;const t=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(t,this.headerPosition+1)}return this.buffer.slice(e?0:5,this.offset)}flush(e){var t=this.join(e);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),t}}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;const s=r(21),i=r(45),o=n(r(8)),a=Buffer.allocUnsafe(0);t.Parser=class{constructor(e){if(this.buffer=a,this.bufferLength=0,this.bufferOffset=0,this.reader=new i.BufferReader,"binary"===(null==e?void 0:e.mode))throw new Error("Binary mode not supported yet");this.mode=(null==e?void 0:e.mode)||"text"}parse(e,t){this.mergeBuffer(e);const r=this.bufferOffset+this.bufferLength;let n=this.bufferOffset;for(;n+5<=r;){const e=this.buffer[n],s=this.buffer.readUInt32BE(n+1),i=1+s;if(!(i+n<=r))break;t(this.handlePacket(n+5,e,s,this.buffer)),n+=i}n===r?(this.buffer=a,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=r-n,this.bufferOffset=n)}mergeBuffer(e){if(this.bufferLength>0){const t=this.bufferLength+e.byteLength;if(t+this.bufferOffset>this.buffer.byteLength){let e;if(t<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)e=this.buffer;else{let r=2*this.buffer.byteLength;for(;t>=r;)r*=2;e=Buffer.allocUnsafe(r)}this.buffer.copy(e,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=e,this.bufferOffset=0}e.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=t}else this.buffer=e,this.bufferOffset=0,this.bufferLength=e.byteLength}handlePacket(e,t,r,n){switch(t){case 50:return s.bindComplete;case 49:return s.parseComplete;case 51:return s.closeComplete;case 110:return s.noData;case 115:return s.portalSuspended;case 99:return s.copyDone;case 87:return s.replicationStart;case 73:return s.emptyQuery;case 68:return this.parseDataRowMessage(e,r,n);case 67:return this.parseCommandCompleteMessage(e,r,n);case 90:return this.parseReadyForQueryMessage(e,r,n);case 65:return this.parseNotificationMessage(e,r,n);case 82:return this.parseAuthenticationResponse(e,r,n);case 83:return this.parseParameterStatusMessage(e,r,n);case 75:return this.parseBackendKeyData(e,r,n);case 69:return this.parseErrorMessage(e,r,n,"error");case 78:return this.parseErrorMessage(e,r,n,"notice");case 84:return this.parseRowDescriptionMessage(e,r,n);case 116:return this.parseParameterDescriptionMessage(e,r,n);case 71:return this.parseCopyInMessage(e,r,n);case 72:return this.parseCopyOutMessage(e,r,n);case 100:return this.parseCopyData(e,r,n);default:o.default.fail("unknown message code: "+t.toString(16))}}parseReadyForQueryMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.string(1);return new s.ReadyForQueryMessage(t,n)}parseCommandCompleteMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring();return new s.CommandCompleteMessage(t,n)}parseCopyData(e,t,r){const n=r.slice(e,e+(t-4));return new s.CopyDataMessage(t,n)}parseCopyInMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyInResponse")}parseCopyOutMessage(e,t,r){return this.parseCopyMessage(e,t,r,"copyOutResponse")}parseCopyMessage(e,t,r,n){this.reader.setBuffer(e,r);const i=0!==this.reader.byte(),o=this.reader.int16(),a=new s.CopyResponse(t,n,i,o);for(let e=0;e<o;e++)a.columnTypes[e]=this.reader.int16();return a}parseNotificationMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.cstring(),o=this.reader.cstring();return new s.NotificationResponseMessage(t,n,i,o)}parseRowDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new s.RowDescriptionMessage(t,n);for(let e=0;e<n;e++)i.fields[e]=this.parseField();return i}parseField(){const e=this.reader.cstring(),t=this.reader.int32(),r=this.reader.int16(),n=this.reader.int32(),i=this.reader.int16(),o=this.reader.int32(),a=0===this.reader.int16()?"text":"binary";return new s.Field(e,t,r,n,i,o,a)}parseParameterDescriptionMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new s.ParameterDescriptionMessage(t,n);for(let e=0;e<n;e++)i.dataTypeIDs[e]=this.reader.int32();return i}parseDataRowMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int16(),i=new Array(n);for(let e=0;e<n;e++){const t=this.reader.int32();i[e]=-1===t?null:this.reader.string(t)}return new s.DataRowMessage(t,i)}parseParameterStatusMessage(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.cstring(),i=this.reader.cstring();return new s.ParameterStatusMessage(t,n,i)}parseBackendKeyData(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i=this.reader.int32();return new s.BackendKeyDataMessage(t,n,i)}parseAuthenticationResponse(e,t,r){this.reader.setBuffer(e,r);const n=this.reader.int32(),i={name:"authenticationOk",length:t};switch(n){case 0:break;case 3:8===i.length&&(i.name="authenticationCleartextPassword");break;case 5:if(12===i.length){i.name="authenticationMD5Password";const e=this.reader.bytes(4);return new s.AuthenticationMD5Password(t,e)}break;case 10:let e;i.name="authenticationSASL",i.mechanisms=[];do{e=this.reader.cstring(),e&&i.mechanisms.push(e)}while(e);break;case 11:i.name="authenticationSASLContinue",i.data=this.reader.string(t-8);break;case 12:i.name="authenticationSASLFinal",i.data=this.reader.string(t-8);break;default:throw new Error("Unknown authenticationOk message type "+n)}return i}parseErrorMessage(e,t,r,n){this.reader.setBuffer(e,r);const i={};let o=this.reader.string(1);for(;"\0"!==o;)i[o]=this.reader.cstring(),o=this.reader.string(1);const a=i.M,u="notice"===n?new s.NoticeMessage(t,a):new s.DatabaseError(a,t,n);return u.severity=i.S,u.code=i.C,u.detail=i.D,u.hint=i.H,u.position=i.P,u.internalPosition=i.p,u.internalQuery=i.q,u.where=i.W,u.schema=i.s,u.table=i.t,u.column=i.c,u.dataType=i.d,u.constraint=i.n,u.file=i.F,u.line=i.L,u.routine=i.R,u}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReader=void 0;const n=Buffer.allocUnsafe(0);t.BufferReader=class{constructor(e=0){this.offset=e,this.buffer=n,this.encoding="utf-8"}setBuffer(e,t){this.offset=e,this.buffer=t}int16(){const e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e}byte(){const e=this.buffer[this.offset];return this.offset++,e}int32(){const e=this.buffer.readInt32BE(this.offset);return this.offset+=4,e}string(e){const t=this.buffer.toString(this.encoding,this.offset,this.offset+e);return this.offset+=e,t}cstring(){const e=this.offset;let t=e;for(;0!==this.buffer[t++];);return this.offset=t,this.buffer.toString(this.encoding,e,t-1)}bytes(e){const t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}}},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";const n=r(0).EventEmitter,s=function(){},i=(e,t)=>{const r=e.findIndex(t);return-1===r?void 0:e.splice(r,1)[0]};class o{constructor(e,t,r){this.client=e,this.idleListener=t,this.timeoutId=r}}class a{constructor(e){this.callback=e}}function u(e,t){if(t)return{callback:t,result:void 0};let r,n;return{callback:function(e,t){e?r(e):n(t)},result:new e((function(e,t){n=e,r=t}))}}e.exports=class extends n{constructor(e,t){super(),this.options=Object.assign({},e),null!=e&&"password"in e&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:e.password}),null!=e&&e.ssl&&e.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||t||r(9).Client,this.Promise=this.options.Promise||global.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log("pulse queue"),this.ended)return void this.log("pulse queue ended");if(this.ending)return this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(e=>{this._remove(e.client)}),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log("no queued requests");if(!this._idle.length&&this._isFull())return;const e=this._pendingQueue.shift();if(this._idle.length){const t=this._idle.pop();clearTimeout(t.timeoutId);const r=t.client;r.ref&&r.ref();const n=t.idleListener;return this._acquireClient(r,e,n,!1)}if(!this._isFull())return this.newClient(e);throw new Error("unexpected condition")}_remove(e){const t=i(this._idle,t=>t.client===e);void 0!==t&&clearTimeout(t.timeoutId),this._clients=this._clients.filter(t=>t!==e),e.end(),this.emit("remove",e)}connect(e){if(this.ending){const t=new Error("Cannot use a pool after calling end on the pool");return e?e(t):this.Promise.reject(t)}const t=u(this.Promise,e),r=t.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new a(t.callback)),r;const e=(e,r,n)=>{clearTimeout(s),t.callback(e,r,n)},n=new a(e),s=setTimeout(()=>{i(this._pendingQueue,t=>t.callback===e),n.timedOut=!0,t.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return this._pendingQueue.push(n),r}return this.newClient(new a(t.callback)),r}newClient(e){const t=new this.Client(this.options);this._clients.push(t);const r=function(e,t){return function r(n){n.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",n)}),e._remove(t),e.emit("error",n,t)}}(this,t);let n;this.log("checking client timeout");let i=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),i=!0,t.connection?t.connection.stream.destroy():t.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),t.connect(o=>{if(n&&clearTimeout(n),t.on("error",r),!o)return this.log("new client connected"),0!==this.options.maxLifetimeSeconds&&setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(t);-1!==this._idle.findIndex(e=>e.client===t)&&this._acquireClient(t,new a((e,t,r)=>r()),r,!1)},1e3*this.options.maxLifetimeSeconds),this._acquireClient(t,e,r,!0);this.log("client failed to connect",o),this._clients=this._clients.filter(e=>e!==t),i&&(o.message="Connection terminated due to connection timeout"),this._pulseQueue(),e.timedOut||e.callback(o,void 0,s)})}_acquireClient(e,t,r,n){n&&this.emit("connect",e),this.emit("acquire",e),e.release=this._releaseOnce(e,r),e.removeListener("error",r),t.timedOut?n&&this.options.verify?this.options.verify(e,e.release):e.release():n&&this.options.verify?this.options.verify(e,r=>{if(r)return e.release(r),t.callback(r,void 0,s);t.callback(void 0,e,e.release)}):t.callback(void 0,e,e.release)}_releaseOnce(e,t){let r=!1;return n=>{r&&function(){throw new Error("Release called on client which has already been released to the pool.")}(),r=!0,this._release(e,t,n)}}_release(e,t,r){if(e.on("error",t),e._poolUseCount=(e._poolUseCount||0)+1,r||this.ending||!e._queryable||e._ending||e._poolUseCount>=this.options.maxUses)return e._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(e),void this._pulseQueue();if(this._expired.has(e))return this.log("remove expired client"),this._expired.delete(e),this._remove(e),void this._pulseQueue();let n;this.options.idleTimeoutMillis&&(n=setTimeout(()=>{this.log("remove idle client"),this._remove(e)},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&n.unref()),this.options.allowExitOnIdle&&e.unref(),this._idle.push(new o(e,t,n)),this._pulseQueue()}query(e,t,r){if("function"==typeof e){const t=u(this.Promise,e);return setImmediate((function(){return t.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))})),t.result}"function"==typeof t&&(r=t,t=void 0);const n=u(this.Promise,r);return r=n.callback,this.connect((n,s)=>{if(n)return r(n);let i=!1;const o=e=>{i||(i=!0,s.release(e),r(e))};s.once("error",o),this.log("dispatching query"),s.query(e,t,(e,t)=>{if(this.log("query dispatched"),s.removeListener("error",o),!i)return i=!0,s.release(e),e?r(e):r(void 0,t)})}),n.result}end(e){if(this.log("ending"),this.ending){const t=new Error("Called end on pool more than once");return e?e(t):this.Promise.reject(t)}this.ending=!0;const t=u(this.Promise,e);return this._endCallback=t.callback,this._pulseQueue(),t.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((e,t)=>e+(this._expired.has(t)?1:0),0)}get totalCount(){return this._clients.length}}},function(e,t,r){"use strict";var n=r(49),s=r(17),i=(r(60),r(0).EventEmitter),o=r(1),a=r(18),u=r(61),c=e.exports=function(e){i.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new s(e.types),this.native=new n({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var t=this.connectionParameters=new a(e);this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};c.Query=u,o.inherits(c,i),c.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick(()=>{t.native=this.native,t.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},c.prototype._connect=function(e){var t=this;this._connecting?process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client."))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(r,n){if(r)return e(r);t.native.connect(n,(function(r){if(r)return t.native.end(),e(r);t._connected=!0,t.native.on("error",(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit("error",e)})),t.native.on("notification",(function(e){t.emit("notification",{channel:e.relname,payload:e.extra})})),t.emit("connect"),t._pulseQueryQueue(!0),e()}))})))},c.prototype.connect=function(e){if(!e)return new this._Promise((e,t)=>{this._connect(r=>{r?t(r):e()})});this._connect(e)},c.prototype.query=function(e,t,r){var n,s,i,o,a;if(null==e)throw new TypeError("Client was passed a null or undefined query");if("function"==typeof e.submit)i=e.query_timeout||this.connectionParameters.query_timeout,s=n=e,"function"==typeof t&&(e.callback=t);else if(i=this.connectionParameters.query_timeout,!(n=new u(e,t,r)).callback){let e,t;s=new this._Promise((r,n)=>{e=r,t=n}),n.callback=(r,n)=>r?t(r):e(n)}return i&&(a=n.callback,o=setTimeout(()=>{var e=new Error("Query read timeout");process.nextTick(()=>{n.handleError(e,this.connection)}),a(e),n.callback=()=>{};var t=this._queryQueue.indexOf(n);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()},i),n.callback=(e,t)=>{clearTimeout(o),a(e,t)}),this._queryable?this._ending?(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"))}),s):(this._queryQueue.push(n),this._pulseQueryQueue(),s):(n.native=this.native,process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"))}),s)},c.prototype.end=function(e){var t,r=this;return this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e)),e||(t=new this._Promise((function(t,r){e=e=>e?r(e):t()}))),this.native.end((function(){r._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{r.emit("end"),e&&e()})})),t},c.prototype._hasActiveQuery=function(){return this._activeQuery&&"error"!==this._activeQuery.state&&"end"!==this._activeQuery.state},c.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var r=this;t.once("_done",(function(){r._pulseQueryQueue()}))}else e||this.emit("drain")}},c.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},c.prototype.ref=function(){},c.prototype.unref=function(){},c.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)},c.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}},function(e,t,r){var n=r(50),s=r(0).EventEmitter,i=r(1),o=r(8),a=r(54),u=r(57),c=r(58),h=e.exports=function(e){if(!(this instanceof h))return new h(e);e=e||{},s.call(this),this.pq=new n,this._reading=!1,this._read=this._read.bind(this),this._types=e.types||a,this.arrayMode=e.arrayMode||!1,this._resultCount=0,this._rows=void 0,this._results=void 0,this.on("newListener",e=>{"notification"===e&&this._startReading()}),this.on("result",this._onResult.bind(this)),this.on("readyForQuery",this._onReadyForQuery.bind(this))};i.inherits(h,s),h.prototype.connect=function(e,t){this.pq.connect(e,t)},h.prototype.connectSync=function(e){this.pq.connectSync(e)},h.prototype.query=function(e,t,r){var n;"function"==typeof t?(r=t,n=function(){return s.pq.sendQuery(e)}):n=function(){return s.pq.sendQueryParams(e,t)};var s=this;s._dispatchQuery(s.pq,n,(function(e){if(e)return r(e);s._awaitResult(r)}))},h.prototype.prepare=function(e,t,r,n){var s=this;s._dispatchQuery(s.pq,(function(){return s.pq.sendPrepare(e,t,r)}),(function(e){if(e)return n(e);s._awaitResult(n)}))},h.prototype.execute=function(e,t,r){var n=this;n._dispatchQuery(n.pq,(function(){return n.pq.sendQueryPrepared(e,t)}),(function(e,t){if(e)return r(e);n._awaitResult(r)}))},h.prototype.getCopyStream=function(){return this.pq.setNonBlocking(!0),this._stopReading(),new c(this.pq)},h.prototype.cancel=function(e){o(e,"Callback is required");var t=this.pq.cancel();return setImmediate((function(){e(!0===t?void 0:new Error(t))}))},h.prototype.querySync=function(e,t){t?this.pq.execParams(e,t):this.pq.exec(e),l(this.pq);return u(this.pq,this._types,this.arrayMode).rows},h.prototype.prepareSync=function(e,t,r){this.pq.prepare(e,t,r),l(this.pq)},h.prototype.executeSync=function(e,t){return this.pq.execPrepared(e,t),l(this.pq),u(this.pq,this._types,this.arrayMode).rows},h.prototype.escapeLiteral=function(e){return this.pq.escapeLiteral(e)},h.prototype.escapeIdentifier=function(e){return this.pq.escapeIdentifier(e)},e.exports.version=r(59).version,h.prototype.end=function(e){this._stopReading(),this.pq.finish(),e&&setImmediate(e)},h.prototype._readError=function(e){var t=new Error(e||this.pq.errorMessage());this.emit("error",t)},h.prototype._stopReading=function(){this._reading&&(this._reading=!1,this.pq.stopReader(),this.pq.removeListener("readable",this._read))},h.prototype._consumeQueryResults=function(e){return u(e,this._types,this.arrayMode)},h.prototype._emitResult=function(e){var t=e.resultStatus();switch(t){case"PGRES_FATAL_ERROR":this._queryError=new Error(this.pq.resultErrorMessage());break;case"PGRES_TUPLES_OK":case"PGRES_COMMAND_OK":case"PGRES_EMPTY_QUERY":const e=this._consumeQueryResults(this.pq);this.emit("result",e);break;case"PGRES_COPY_OUT":case"PGRES_COPY_BOTH":break;default:this._readError("unrecognized command status: "+t)}return t},h.prototype._read=function(){var e=this.pq;if(!e.consumeInput())return this._readError();if(!e.isBusy()){for(;e.getResult();){const t=this._emitResult(this.pq);if("PGRES_COPY_BOTH"===t||"PGRES_COPY_OUT"===t)break;if(e.isBusy())return}this.emit("readyForQuery");for(var t=this.pq.notifies();t;)this.emit("notification",t),t=this.pq.notifies()}},h.prototype._startReading=function(){this._reading||(this._reading=!0,this.pq.on("readable",this._read),this.pq.startReader())};var l=function(e){var t=e.resultErrorMessage()||e.errorMessage();if(t)throw new Error(t)};h.prototype._awaitResult=function(e){return this._queryCallback=e,this._startReading()},h.prototype._waitForDrain=function(e,t){var r=e.flush();if(0===r)return t();if(-1===r)return t(e.errorMessage());var n=this;return e.writable((function(){n._waitForDrain(e,t)}))},h.prototype._dispatchQuery=function(e,t,r){return this._stopReading(),e.setNonBlocking(!0)?t()?void this._waitForDrain(e,r):r(new Error(e.errorMessage()||"Something went wrong dispatching the query")):r(new Error("Unable to set non-blocking to true"))},h.prototype._onResult=function(e){0===this._resultCount?(this._results=e,this._rows=e.rows):1===this._resultCount?(this._results=[this._results,e],this._rows=[this._rows,e.rows]):(this._results.push(e),this._rows.push(e.rows)),this._resultCount++},h.prototype._onReadyForQuery=function(){const e=this._queryCallback;this._queryCallback=void 0;const t=this._queryError;this._queryError=void 0;const r=this._rows;this._rows=void 0;const n=this._results;this._results=void 0,this._resultCount=0,e&&e(t,r||[],n)}},function(e,t,r){(function(e,t){var n=e.exports=r(52)("addon.node").PQ;if(!e.parent){var s=r(2);console.log(s.normalize(t+"/src"))}var i=r(0).EventEmitter,o=r(8);for(var a in i.prototype)n.prototype[a]=i.prototype[a];n.prototype.connectSync=function(e){if(this.connected=!0,e||(e=""),!this.$connectSync(e)){var t=new Error(this.errorMessage());throw this.finish(),t}},n.prototype.connect=function(e,t){this.connected=!0,"function"==typeof e&&(t=e,e=""),e||(e=""),o(t,"Must provide a connection callback"),process.domain&&(t=process.domain.bind(t)),this.$connect(e,t)},n.prototype.errorMessage=function(){return this.$getLastErrorMessage()},n.prototype.socket=function(){return this.$socket()},n.prototype.serverVersion=function(){return this.$serverVersion()},n.prototype.finish=function(){this.connected=!1,this.$finish()},n.prototype.exec=function(e){e||(e=""),this.$exec(e)},n.prototype.execParams=function(e,t){e||(e=""),t||(t=[]),this.$execParams(e,t)},n.prototype.prepare=function(e,t,r){o.equal(arguments.length,3,"Must supply 3 arguments"),e||(e=""),t||(t=""),r=Number(r)||0,this.$prepare(e,t,r)},n.prototype.execPrepared=function(e,t){e||(e=""),t||(t=[]),this.$execPrepared(e,t)},n.prototype.sendQuery=function(e){return e||(e=""),this.$sendQuery(e)},n.prototype.sendQueryParams=function(e,t){return e||(e=""),t||(t=[]),this.$sendQueryParams(e,t)},n.prototype.sendPrepare=function(e,t,r){return o.equal(arguments.length,3,"Must supply 3 arguments"),e||(e=""),t||(t=""),r=Number(r)||0,this.$sendPrepare(e,t,r)},n.prototype.sendQueryPrepared=function(e,t){return e||(e=""),t||(t=[]),this.$sendQueryPrepared(e,t)},n.prototype.getResult=function(){return this.$getResult()},n.prototype.resultStatus=function(){return this.$resultStatus()},n.prototype.resultErrorMessage=function(){return this.$resultErrorMessage()},n.prototype.resultErrorFields=function(){return this.$resultErrorFields()},n.prototype.clear=function(){this.$clear()},n.prototype.ntuples=function(){return this.$ntuples()},n.prototype.nfields=function(){return this.$nfields()},n.prototype.fname=function(e){return this.$fname(e)},n.prototype.ftype=function(e){return this.$ftype(e)},n.prototype.getvalue=function(e,t){return this.$getvalue(e,t)},n.prototype.getisnull=function(e,t){return this.$getisnull(e,t)},n.prototype.cmdStatus=function(){return this.$cmdStatus()},n.prototype.cmdTuples=function(){return this.$cmdTuples()},n.prototype.startReader=function(){o(this.connected,"Must be connected to start reader"),this.$startRead()},n.prototype.stopReader=function(){this.$stopRead()},n.prototype.writable=function(e){return o(this.connected,"Must be connected to start writer"),this.$startWrite(),this.once("writable",e)},n.prototype.consumeInput=function(){return this.$consumeInput()},n.prototype.isBusy=function(){return this.$isBusy()},n.prototype.setNonBlocking=function(e){return this.$setNonBlocking(e?1:0)},n.prototype.isNonBlocking=function(){return this.$isNonBlocking()},n.prototype.flush=function(){return this.$flush()},n.prototype.escapeLiteral=function(e){return e?this.$escapeLiteral(e):e},n.prototype.escapeIdentifier=function(e){return e?this.$escapeIdentifier(e):e},n.prototype.notifies=function(){return this.$notifies()},n.prototype.putCopyData=function(e){return o(e instanceof Buffer),this.$putCopyData(e)},n.prototype.putCopyEnd=function(e){return e?this.$putCopyEnd(e):this.$putCopyEnd()},n.prototype.getCopyData=function(e){return this.$getCopyData(!!e)},n.prototype.cancel=function(){return this.$cancel()}}).call(this,r(51)(e),"/")},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(n){var s=r(7),i=r(2),o=r(53),a=i.join,u=i.dirname,c=s.accessSync&&function(e){try{s.accessSync(e)}catch(e){return!1}return!0}||s.existsSync||i.existsSync,h={arrow:process.env.NODE_BINDINGS_ARROW||" → ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","addon-build","release","install-root","bindings"],["module_root","addon-build","debug","install-root","bindings"],["module_root","addon-build","default","install-root","bindings"],["module_root","lib","binding","nodePreGyp","bindings"]]};e.exports=t=function(e){"string"==typeof e?e={bindings:e}:e||(e={}),Object.keys(h).map((function(t){t in e||(e[t]=h[t])})),e.module_root||(e.module_root=t.getRoot(t.getFileName())),".node"!=i.extname(e.bindings)&&(e.bindings+=".node");for(var r,n,s,o=require,u=[],c=0,l=e.try.length;c<l;c++){r=a.apply(null,e.try[c].map((function(t){return e[t]||t}))),u.push(r);try{return n=e.path?o.resolve(r):o(r),e.path||(n.path=r),n}catch(e){if("MODULE_NOT_FOUND"!==e.code&&"QUALIFIED_PATH_RESOLUTION_FAILED"!==e.code&&!/not find/i.test(e.message))throw e}}throw(s=new Error("Could not locate the bindings file. Tried:\n"+u.map((function(t){return e.arrow+t})).join("\n"))).tries=u,s},t.getFileName=function(e){var t,r=Error.prepareStackTrace,s=Error.stackTraceLimit,i={};Error.stackTraceLimit=10,Error.prepareStackTrace=function(r,s){for(var i=0,o=s.length;i<o;i++)if((t=s[i].getFileName())!==n){if(!e)return;if(t!==e)return}},Error.captureStackTrace(i),Error.prepareStackTrace=r,Error.stackTraceLimit=s;return 0===t.indexOf("file://")&&(t=o(t)),t},t.getRoot=function(e){for(var t,r=u(e);;){if("."===r&&(r=process.cwd()),c(a(r,"package.json"))||c(a(r,"node_modules")))return r;if(t===r)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=r,r=a(r,"..")}}}).call(this,"/index.js")},function(e,t,r){var n=r(2).sep||"/";e.exports=function(e){if("string"!=typeof e||e.length<=7||"file://"!=e.substring(0,7))throw new TypeError("must pass in a file:// URI to convert to a file path");var t=decodeURI(e.substring(7)),r=t.indexOf("/"),s=t.substring(0,r),i=t.substring(r+1);"localhost"==s&&(s="");s&&(s=n+n+s);i=i.replace(/^(.+)\|/,"$1:"),"\\"==n&&(i=i.replace(/\//g,"\\"));/^.+\:/.test(i)||(i=n+i);return s+i}},function(e,t,r){var n=r(55),s=r(56),i=r(24);t.getTypeParser=function(e,t){if(!o[t=t||"text"])return a;return o[t][e]||a},t.setTypeParser=function(e,t,r){"function"==typeof t&&(r=t,t="text");o[t][e]=r},t.arrayParser=i;var o={text:{},binary:{}};function a(e){return String(e)}n.init((function(e,t){o.text[e]=t})),s.init((function(e,t){o.binary[e]=t}))},function(e,t,r){var n=r(23),s=r(24),i=r(13),o=r(14),a=r(15);function u(e){return function(t){return null===t?t:e(t)}}function c(e){return null===e?e:"TRUE"===e||"t"===e||"true"===e||"y"===e||"yes"===e||"on"===e||"1"===e}function h(e){return e?n.parse(e,c):null}function l(e){return parseInt(e,10)}function p(e){return e?n.parse(e,u(l)):null}function f(e){return e?n.parse(e,u((function(e){return b(e).trim()}))):null}var d=function(e){return e?s.create(e,(function(e){return null!==e&&(e=S(e)),e})).parse():null},m=function(e){return e?s.create(e,(function(e){return null!==e&&(e=parseFloat(e)),e})).parse():null},y=function(e){return e?s.create(e).parse():null},g=function(e){return e?s.create(e,(function(e){return null!==e&&(e=i(e)),e})).parse():null},_=function(e){return e?n.parse(e,u(a)):null},v=function(e){return parseInt(e,10)},b=function(e){var t=String(e);return/^\d+$/.test(t)?t:e},w=function(e){var t=y(e);return t?t.map((function(e){return JSON.parse(e)})):t},S=function(e){return"("!==e[0]?null:(e=e.substring(1,e.length-1).split(","),{x:parseFloat(e[0]),y:parseFloat(e[1])})},E=function(e){if("<"!==e[0]&&"("!==e[1])return null;for(var t="(",r="",n=!1,s=2;s<e.length-1;s++)n||(t+=e[s]),")"!==e[s]?n&&","!==e[s]&&(r+=e[s]):n=!0;var i=S(t);return i.radius=parseFloat(r),i};e.exports={init:function(e){e(20,b),e(21,v),e(23,v),e(26,v),e(700,parseFloat),e(701,parseFloat),e(16,c),e(1082,i),e(1114,i),e(1184,i),e(600,S),e(651,y),e(718,E),e(1e3,h),e(1001,_),e(1005,p),e(1007,p),e(1028,p),e(1016,f),e(1017,d),e(1021,m),e(1022,m),e(1231,m),e(1014,y),e(1015,y),e(1008,y),e(1009,y),e(1040,y),e(1041,y),e(1115,g),e(1182,g),e(1185,g),e(1186,o),e(17,a),e(114,JSON.parse.bind(JSON)),e(3802,JSON.parse.bind(JSON)),e(199,w),e(3807,w),e(3907,y),e(2951,y),e(791,y),e(1183,y),e(1270,y)}}},function(e,t,r){var n=r(16),s=function(e,t,r,n,s){n=n||!1,s=s||function(e,t,r){return e*Math.pow(2,r)+t};var i=(r=r||0)>>3,o=function(e){return n?255&~e:e},a=255,u=8-r%8;t<u&&(a=255<<8-t&255,u=t),r&&(a>>=r%8);var c=0;r%8+t>=8&&(c=s(0,o(e[i])&a,u));for(var h=t+r>>3,l=i+1;l<h;l++)c=s(c,o(e[l]),8);var p=(t+r)%8;return p>0&&(c=s(c,o(e[h])>>8-p,p)),c},i=function(e,t,r){var n=Math.pow(2,r-1)-1,i=s(e,1),o=s(e,r,1);if(0===o)return 0;var a=1,u=s(e,t,r+1,!1,(function(e,t,r){0===e&&(e=1);for(var n=1;n<=r;n++)a/=2,(t&1<<r-n)>0&&(e+=a);return e}));return o==Math.pow(2,r+1)-1?0===u?0===i?1/0:-1/0:NaN:(0===i?1:-1)*Math.pow(2,o-n)*u},o=function(e){return 1==s(e,1)?-1*(s(e,15,1,!0)+1):s(e,15,1)},a=function(e){return 1==s(e,1)?-1*(s(e,31,1,!0)+1):s(e,31,1)},u=function(e){return i(e,23,8)},c=function(e){return i(e,52,11)},h=function(e){var t=s(e,16,32);if(49152==t)return NaN;for(var r=Math.pow(1e4,s(e,16,16)),n=0,i=s(e,16),o=0;o<i;o++)n+=s(e,16,64+16*o)*r,r/=1e4;var a=Math.pow(10,s(e,16,48));return(0===t?1:-1)*Math.round(n*a)/a},l=function(e,t){var r=s(t,1),n=s(t,63,1),i=new Date((0===r?1:-1)*n/1e3+9466848e5);return e||i.setTime(i.getTime()+6e4*i.getTimezoneOffset()),i.usec=n%1e3,i.getMicroSeconds=function(){return this.usec},i.setMicroSeconds=function(e){this.usec=e},i.getUTCMicroSeconds=function(){return this.usec},i},p=function(e){for(var t=s(e,32),r=(s(e,32,32),s(e,32,64)),n=96,i=[],o=0;o<t;o++)i[o]=s(e,32,n),n+=32,n+=32;var a=function(t){var r,i=s(e,32,n);return n+=32,4294967295==i?null:23==t||20==t?(r=s(e,8*i,n),n+=8*i,r):25==t?r=e.toString(this.encoding,n>>3,(n+=i<<3)>>3):void console.log("ERROR: ElementType not implemented: "+t)},u=function(e,t){var r,n=[];if(e.length>1){var s=e.shift();for(r=0;r<s;r++)n[r]=u(e,t);e.unshift(s)}else for(r=0;r<e[0];r++)n[r]=a(t);return n};return u(i,r)},f=function(e){return e.toString("utf8")},d=function(e){return null===e?null:s(e,8)>0};e.exports={init:function(e){e(20,n),e(21,o),e(23,a),e(26,a),e(1700,h),e(700,u),e(701,c),e(16,d),e(1114,l.bind(null,!1)),e(1184,l.bind(null,!0)),e(1e3,p),e(1007,p),e(1016,p),e(1008,p),e(1009,p),e(25,f)}}},function(e,t,r){"use strict";class n{constructor(e,t){this._types=e,this._arrayMode=t,this.command=void 0,this.rowCount=void 0,this.fields=[],this.rows=[]}consumeCommand(e){this.command=e.cmdStatus().split(" ")[0],this.rowCount=parseInt(e.cmdTuples(),10)}consumeFields(e){const t=e.nfields();for(var r=0;r<t;r++)this.fields.push({name:e.fname(r),dataTypeID:e.ftype(r)})}consumeRows(e){const t=e.ntuples();for(var r=0;r<t;r++){const t=this._arrayMode?this.consumeRowAsArray(e,r):this.consumeRowAsObject(e,r);this.rows.push(t)}}consumeRowAsObject(e,t){const r={};for(var n=0;n<this.fields.length;n++){const s=this.readValue(e,t,n);r[this.fields[n].name]=s}return r}consumeRowAsArray(e,t){const r=[];for(var n=0;n<this.fields.length;n++){const s=this.readValue(e,t,n);r.push(s)}return r}readValue(e,t,r){var n=e.getvalue(t,r);if(""===n&&e.getisnull(t,r))return null;const s=this.fields[r].dataTypeID;return this._types.getTypeParser(s)(n)}}e.exports=function(e,t,r){const s=new n(t,r);return s.consumeCommand(e),s.consumeFields(e),s.consumeRows(e),s}},function(e,t,r){var n=r(5).Duplex,s=r(5).Writable,i=r(1),o=e.exports=function(e,t){n.call(this,t),this.pq=e,this._reading=!1};i.inherits(o,n),o.prototype._write=function(e,t,r){var n=this.pq.putCopyData(e);if(1===n)return r();if(-1===n)return r(new Error(this.pq.errorMessage()));var s=this;this.pq.writable((function(){s._write(e,t,r)}))},o.prototype.end=function(){var e=Array.prototype.slice.call(arguments,0),t=this,r=e.pop();e.length&&this.write(e[0]);var n=this.pq.putCopyEnd();if(1===n)return a(this.pq,(function(e,n){s.prototype.end.call(t),r&&r(e)}));if(-1===n){var i=new Error(this.pq.errorMessage());return this.emit("error",i)}return this.pq.writable((function(){return t.end.apply(t,r)}))},o.prototype._consumeBuffer=function(e){var t=this.pq.getCopyData(!0);if(t instanceof Buffer)return setImmediate((function(){e(null,t)}));if(-1===t)return e(null,null);if(0===t){var r=this;return this.pq.once("readable",(function(){r.pq.stopReader(),r.pq.consumeInput(),r._consumeBuffer(e)})),this.pq.startReader()}e(new Error("Unrecognized read status: "+t))},o.prototype._read=function(e){if(!this._reading){this._reading=!0;var t=this;this._consumeBuffer((function(e,r){if(t._reading=!1,e)return t.emit("error",e);!1!==r&&t.push(r)}))}};var a=function(e,t){var r=function(){e.removeListener("readable",s),e.stopReader()},n=function(n){return r(),t(new Error(n||e.errorMessage()))},s=function(){return e.consumeInput()?e.isBusy()?void 0:(e.getResult(),e.getResult()&&"PGRES_COPY_OUT"!==e.resultStatus()?n("Only one result at a time is accepted"):"PGRES_FATAL_ERROR"===e.resultStatus()?n():(r(),t(null))):n()};e.on("readable",s),e.startReader()}},function(e){e.exports=JSON.parse('{"name":"pg-native","version":"3.0.0","description":"A slightly nicer interface to Postgres over node-libpq","main":"index.js","scripts":{"test":"mocha && eslint ."},"repository":{"type":"git","url":"git://github.com/brianc/node-pg-native.git"},"keywords":["postgres","pg","libpq"],"author":"Brian M. Carlson","license":"MIT","bugs":{"url":"https://github.com/brianc/node-pg-native/issues"},"homepage":"https://github.com/brianc/node-pg-native","dependencies":{"libpq":"^1.7.0","pg-types":"^1.12.1","readable-stream":"1.0.31"},"devDependencies":{"async":"^0.9.0","concat-stream":"^1.4.6","eslint":"4.2.0","eslint-config-standard":"10.2.1","eslint-plugin-import":"2.7.0","eslint-plugin-node":"5.1.0","eslint-plugin-promise":"3.5.0","eslint-plugin-standard":"3.0.1","generic-pool":"^2.1.1","lodash":"^2.4.1","mocha":"3.4.2","okay":"^0.3.0","pg":"*","semver":"^4.1.0"}}')},function(e){e.exports=JSON.parse('{"name":"pg","version":"8.7.3","description":"PostgreSQL client - pure javascript & libpq with the same API","keywords":["database","libpq","pg","postgre","postgres","postgresql","rdbms"],"homepage":"https://github.com/brianc/node-postgres","repository":{"type":"git","url":"git://github.com/brianc/node-postgres.git","directory":"packages/pg"},"author":"Brian Carlson <brian.m.carlson@gmail.com>","main":"./lib","dependencies":{"buffer-writer":"2.0.0","packet-reader":"1.0.0","pg-connection-string":"^2.5.0","pg-pool":"^3.5.1","pg-protocol":"^1.5.0","pg-types":"^2.1.0","pgpass":"1.x"},"devDependencies":{"async":"0.9.0","bluebird":"3.5.2","co":"4.6.0","pg-copy-streams":"0.3.0"},"peerDependencies":{"pg-native":">=2.0.0"},"peerDependenciesMeta":{"pg-native":{"optional":true}},"scripts":{"test":"make test-all"},"files":["lib","SPONSORS.md"],"license":"MIT","engines":{"node":">= 8.0.0"},"gitHead":"4fa7ee891a456168a75695ac026792136f16577f"}')},function(e,t,r){"use strict";var n=r(0).EventEmitter,s=r(1),i=r(6),o=e.exports=function(e,t,r){n.call(this),e=i.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.callback=e.callback,this.state="new",this._arrayMode="array"===e.rowMode,this._emitRowEvents=!1,this.on("newListener",function(e){"row"===e&&(this._emitRowEvents=!0)}.bind(this))};s.inherits(o,n);var a={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};o.prototype.handleError=function(e){var t=this.native.pq.resultErrorFields();if(t)for(var r in t){e[a[r]||r]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"},o.prototype.then=function(e,t){return this._getPromise().then(e,t)},o.prototype.catch=function(e){return this._getPromise().catch(e)},o.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this))),this._promise},o.prototype.submit=function(e){this.state="running";var t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;var r=function(r,n,s){if(e.native.arrayMode=!1,setImmediate((function(){t.emit("_done")})),r)return t.handleError(r);t._emitRowEvents&&(s.length>1?n.forEach((e,r)=>{e.forEach(e=>{t.emit("row",e,s[r])})}):n.forEach((function(e){t.emit("row",e,s)}))),t.state="end",t.emit("end",s),t.callback&&t.callback(null,s)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));var n=(this.values||[]).map(i.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){const e=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(e)}return e.native.execute(this.name,n,r)}return e.native.prepare(this.name,this.text,n.length,(function(s){return s?r(s):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,n,r))}))}if(this.values){if(!Array.isArray(this.values)){const e=new Error("Query values must be an array");return r(e)}var s=this.values.map(i.prepareValue);e.native.query(this.text,s,r)}else e.native.query(this.text,r)}}]));